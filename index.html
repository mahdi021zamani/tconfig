<!DOCTYPE html>
<html lang="fa">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>دریافت کانفیگ</title>
        <!-- Bootstrap CSS -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
        <style>
            .container {
                margin-top: 50px;
            }
        </style>
    </head>
    <body>

        <div class="container">
            <h2>انتخاب نوع کانفیگ</h2>
            <!-- Dropdown menu for config types -->
            <div class="dropdown">
                <button class="btn btn-primary dropdown-toggle" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false">
                    انتخاب نوع کانفیگ
                </button>
                <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                    <li><a class="dropdown-item" href="#" data-type="warp">Warp</a></li>
                    <li><a class="dropdown-item" href="#" data-type="mix">Mix</a></li>
                    <li><a class="dropdown-item" href="#" data-type="ipv4">IPv4</a></li>
                    <li><a class="dropdown-item" href="#" data-type="ipv6">IPv6</a></li>
                    <li><a class="dropdown-item" href="#" data-type="shadowsocks">Shadowsocks</a></li>
                    <li><a class="dropdown-item" href="#" data-type="v2ray">V2Ray</a></li>
                    <li><a class="dropdown-item" href="#" data-type="trojan">Trojan</a></li>
                    <li><a class="dropdown-item" href="#" data-type="vmess">Vmess</a></li>
                    <li><a class="dropdown-item" href="#" data-type="socks5">SOCKS5</a></li>
                </ul>
            </div>

            <!-- Button to get config -->
            <button id="get" class="btn btn-success mt-3" disabled>دریافت کانفیگ</button>

            <div class="mt-4" id="resultContainer" style="display:none;">
                <textarea class="form-control" id="result" rows="5" readonly></textarea>
                <button class="btn btn-info mt-3" id="copyConfig">کپی کانفیگ</button>
            </div>
        </div>

        <!-- Bootstrap JS, Popper, and jQuery -->
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>

        <script>
            $(document).ready(function() {
                // Event listener for selecting config type from the dropdown
                $(document).on('click', '.dropdown-item', function(e) {
                    e.preventDefault(); // Prevent default action
                    const selectedType = $(this).data('type'); // Get selected config type
                    $('#dropdownMenuButton').text($(this).text()); // Change dropdown button text
                    $('#get').prop('disabled', false); // Enable the "Get Config" button
                    $('#get').data('type', selectedType); // Store the selected type in the button
                });

                // Event listener for clicking the "Get Config" button
                $(document).on('click', '#get', function(e) {
                    e.preventDefault();
                    const selectedType = $(this).data('type'); // Get selected config type
                    let config = "";

                    // Fetch config based on selected type
                    if (selectedType === 'warp') {
                        config = "warp://auto/?ifp=10-20&ifps=10-20&ifpd=1-2&ifpm=m4#WarpInWarp ⭐️&&detour=warp://auto#Warp 🇮🇷";
                    } else if (selectedType === 'mix') {
                        config = "https://example.com/mix-config-url";
                    } else if (selectedType === 'ipv4') {
                        config = "https://example.com/ipv4-config-url";
                    } else if (selectedType === 'ipv6') {
                        config = "https://example.com/ipv6-config-url";
                    } else if (selectedType === 'shadowsocks') {
                        config = "ss://YWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXo6cGFzc3dvcmQ@server.com:12345#ShadowsocksConfig";
                    } else if (selectedType === 'v2ray') {
                        config = "v2ray://eyJ2IjoiMS4wIiwidiI6IjIiLCJwIjoiY2hhY2hhY2hhY2NoYWNodGFvdiJ9";
                    } else if (selectedType === 'trojan') {
                        config = "trojan://password@server.com:443#TrojanConfig";
                    } else if (selectedType === 'vmess') {
                        config = "vmess://eyJ2IjoiMSIsImFkZCI6InNlcnZlci5jb20iLCJwb3J0IjoiMjAwMCIsInR5cGUiOiJub3RlIiwiaWQiOiIxMjM0NTY3ODkwIiwibm9kZSI6IjAiLCJzY2hldWxlIjoiY2xvdWQiLCJhbGciOiJhdXRoMiJ9";
                    } else if (selectedType === 'socks5') {
                        config = "socks5://user:password@server.com:1080#SOCKS5Proxy";
                    } else {
                        alert('لطفاً نوع کانفیگ را انتخاب کنید.');
                        return;
                    }

                    // Display the config in the textarea
                    $('#result').val(config);
                    $('#resultContainer').show(); // Show result container
                });

                // Event listener for copying the config to clipboard
                $(document).on('click', '#copyConfig', function() {
                    const configText = $('#result').val();
                    navigator.clipboard.writeText(configText).then(() => {
                        alert('کانفیگ در کلیپ‌بورد کپی شد!');
                    }).catch((err) => {
                        alert('خطا در کپی کانفیگ: ' + err);
                    });
                });
            });
        </script>
    </body>
</html>